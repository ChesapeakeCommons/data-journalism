mapboxgl.accessToken = 'pk.eyJ1IjoiZGZsb3Jlc2NwciIsImEiOiJjajdidzR2dHUweWtwMnZtamhpcGRqYjIzIn0.UTOUFTmg3TWCblnGKKqc7Q'; // replace this with your access token


var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/dflorescpr/cj7ce69w905bq2srqj5e6uk5i'// replace this with your style
   
});



map.on('click', function(e) {
  var features = map.queryRenderedFeatures(e.point, {
    layers: ['map_1-7zut1a'] // replace this with the name of the layer
  });

  if (!features.length) {
    return;
  }

  var feature = features[0];

  var popup = new mapboxgl.Popup({ offset: [0, -15] })
    .setLngLat(feature.geometry.coordinates)
    .setHTML('<h3>' + feature.properties.name + '</h3><p>' + feature.properties.name + '</p>')
    .setLngLat(feature.geometry.coordinates)
    .addTo(map);
});




map.scrollZoom.disable();

map.addControl(new MapboxGeocoder({
    accessToken: mapboxgl.accessToken
}));


map.addControl(new mapboxgl.NavigationControl());

function flyHandler(id, options) {
  var button = document.getElementById(id);
  if(!button) return;
  button.addEventListener('click', function() {
    map.flyTo({
      center: options.center,
      zoom: options.zoom || 5
    });
    if (options.startDay) {
      console.log('Play from day', options.startDay);
      play(options.startDay);
    }
    if (options.speed) {
      setSpeed(options.speed);
    }
  });
}

flyHandler('jupiter', {
    center: [-80.089,26.887],
    zoom: 14.3
});


flyHandler('marlago', {
center: [-80.036,26.677],
zoom: 16.5
});

flyHandler('doral', {
center: [-80.337,25.813],
zoom: 14.5
});

flyHandler('fullextent', {
center: [-80.553,26.173],
zoom: 7.6
});




function getQueryVariable(variable) {
    var query = window.location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
    console.log('Query variable %s not found', variable);
}


